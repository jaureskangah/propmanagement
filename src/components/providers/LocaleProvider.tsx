import React, { createContext, useContext, useState, useEffect, useCallback } from 'react';

interface LocaleContextProps {
  locale: string;
  setLocale: (locale: string) => void;
  t: (key: string, args?: any) => string;
  language: string;
  setLanguage: (language: string) => void;
  unitSystem: 'metric' | 'imperial';
  setUnitSystem: (system: 'metric' | 'imperial') => void;
}

const LocaleContext = createContext<LocaleContextProps | undefined>(undefined);

interface LocaleProviderProps {
  children: React.ReactNode;
  defaultLocale?: string;
}

const translations = {
  fr: {
    // Hero translations
    heroTitle: "Gestion Immobilière Simplifiée",
    heroSubtitle: "La solution complète pour les propriétaires canadiens. Gérez locataires, maintenance et finances en un seul endroit.",
    heroGetStarted: "Commencer Gratuitement",
    learnMore: "En savoir plus",
    
    // Features translations
    everythingYouNeed: "Tout ce dont vous avez besoin",
    featuresSubtitle: "Des outils puissants pour simplifier la gestion de vos propriétés",
    propertyManagement: "Gestion de Propriétés",
    propertyManagementDesc: "Organisez et suivez toutes vos propriétés en un seul endroit",
    tenantManagement: "Gestion de Locataires",
    tenantManagementDesc: "Gérez les informations, les baux et la communication avec vos locataires",
    maintenanceManagement: "Maintenance",
    maintenanceDesc: "Suivez les demandes de maintenance et coordonnez les réparations",
    security: "Sécurité",
    securityDesc: "Vos données sont protégées avec un chiffrement de niveau bancaire",
    
    // How It Works translations
    howItWorksTitle: "Comment ça marche",
    howItWorksSubtitle: "Des étapes simples pour gérer vos propriétés",
    step1Title: "Créez un compte",
    step1Description: "Inscrivez-vous en quelques minutes avec votre adresse email",
    step2Title: "Ajoutez vos propriétés",
    step2Description: "Entrez les détails de vos propriétés et commencez à gérer",
    step3Title: "Gérez les locataires",
    step3Description: "Ajoutez des locataires et gérez les communications efficacement",
    step4Title: "Suivez tout",
    step4Description: "Surveillez la maintenance, les paiements et les documents en un seul endroit",
    
    // Pricing translations
    pricingTitle: "Tarification simple et transparente",
    pricingSubtitle: "Choisissez le plan qui vous convient le mieux",
    pricingStartFree: "Commencer",
    pricingGetStarted: "Commencer",
    comparePlans: "Comparer les plans",
    comparePlansTitle: "Comparaison des fonctionnalités",
    feature: "Fonctionnalité",
    freemiumPlan: "Basique",
    proPlan: "Standard",
    enterprisePlan: "Pro",
    free: "Gratuit",
    month: "mois",
    mostPopular: "Le plus populaire",
    
    // Plan Features
    upTo2Properties: "Jusqu'à 3 propriétés",
    upTo5Properties: "Jusqu'à 10 propriétés",
    upTo20Properties: "Propriétés illimitées",
    rentManagement: "Suivi des loyers basique",
    digitalDocuments: "Stockage de documents",
    basicPropertyCards: "Gestion des locataires basique",
    emailNotifications: "Notifications par email",
    tenantVerification: "Vérification des locataires",
    prioritySupport: "Support prioritaire",
    advancedDashboard: "Tableau de bord avancé",
    financialReports: "Rapports financiers basiques",
    maintenanceManagementFeature: "Gestion de la maintenance",
    dedicatedSupport: "Équipe de support dédiée",
    customDashboard: "Tableau de bord personnalisable",
    advancedFinancialReports: "Rapports financiers avancés",
    userTraining: "Sessions de formation",
    dailyBackup: "Sauvegarde automatique des données",
    
    // Additional tenant dashboard translations
    overview: "Aperçu",
    leaseStatus: "Statut du bail",
    leaseStart: "Début du bail",
    leaseEnd: "Fin du bail",
    daysRemaining: "Jours restants",
    allGood: "Tout va bien",
    noMaintenanceIssues: "Aucun problème de maintenance",
    unread: "Non lu",
    upToDate: "À jour",
    unreadMessages: "Messages non lus",
    noNewMessages: "Aucun nouveau message",
    recentActivity: "Activité récente",
    noRecentActivity: "Aucune activité récente",
    unit: "Unité",
    unitLabel: "Unité",
    leaseActive: "Bail actif",
    leaseExpiring: "Bail expirant",
    leaseExpired: "Bail expiré",
    
    // FAQ translations
    frequentlyAskedQuestions: "Questions fréquemment posées",
    findAnswers: "Trouvez des réponses aux questions courantes",
    faqHowToStart: "Comment commencer ?",
    faqHowToStartAnswer: "Créez simplement un compte et suivez notre guide étape par étape pour ajouter votre première propriété.",
    faqFeatures: "Quelles fonctionnalités sont incluses ?",
    faqFeaturesAnswer: "Notre plateforme inclut la gestion immobilière, la gestion des locataires, le suivi de la maintenance et les rapports financiers.",
    faqMultipleProperties: "Puis-je gérer plusieurs propriétés ?",
    faqMultiplePropertiesAnswer: "Oui, vous pouvez gérer plusieurs propriétés depuis un seul tableau de bord.",
    faqCommunication: "Comment fonctionne la communication avec les locataires ?",
    faqCommunicationAnswer: "Vous pouvez communiquer avec les locataires via notre système de messagerie intégré et les notifications.",
    faqSecurity: "Mes données sont-elles sécurisées ?",
    faqSecurityAnswer: "Oui, nous utilisons des mesures de sécurité et de chiffrement aux normes de l'industrie pour protéger vos données.",
    faqExport: "Puis-je exporter mes données ?",
    faqExportAnswer: "Oui, vous pouvez exporter vos données dans différents formats, notamment PDF et Excel.",
    
    // Contact translations
    contactUs: "Contactez-nous",
    contactSubtitle: "Nous sommes là pour vous aider",
    phone: "Téléphone",
    email: "Email",
    office: "Bureau",
    sendMessage: "Envoyez-nous un message",
    yourName: "Votre nom",
    yourEmail: "Votre email",
    message: "Message",
    sending: "Envoi en cours...",
    send: "Envoyer le message",
    contactName: "Nom",
    contactEmail: "Email",
    contactMessage: "Message",
    contactSend: "Envoyer",
    contactThankYou: "Merci pour votre message !",
    
    // Footer translations
    companyName: "PropManagement",
    companyDescription: "La solution complète pour la gestion immobilière au Canada.",
    product: "Produit",
    features: "Fonctionnalités",
    pricing: "Tarification",
    company: "Entreprise",
    aboutUs: "À propos",
    careers: "Carrières",
    contact: "Contact",
    legal: "Légal",
    privacyPolicy: "Politique de confidentialité",
    termsOfService: "Conditions d'utilisation",
    cookiePolicy: "Politique des cookies",
    allRightsReserved: "Tous droits réservés.",
    
    // CTA translations
    readyToStart: "Prêt à simplifier votre gestion ?",
    joinOthers: "Rejoignez des milliers de propriétaires qui nous font confiance",
    ctaStartFree: "Essayer gratuitement",
    
    // Existing translations
    welcome: "Bienvenue",
    login: "Se connecter",
    logout: "Déconnexion",
    dashboard: "Tableau de bord",
    properties: "Propriétés",
    tenants: "Locataires",
    maintenance: "Maintenance",
    financials: "Finances",
    settings: "Paramètres",
    addProperty: "Ajouter une propriété",
    editProperty: "Modifier la propriété",
    deleteProperty: "Supprimer la propriété",
    propertyName: "Nom de la propriété",
    propertyAddress: "Adresse de la propriété",
    propertyType: "Type de propriété",
    propertyDetails: "Détails de la propriété",
    save: "Enregistrer",
    cancel: "Annuler",
    deleteConfirmation: "Êtes-vous sûr de vouloir supprimer cette propriété ?",
    propertyAdded: "Propriété ajoutée avec succès!",
    propertyUpdated: "Propriété mise à jour avec succès!",
    propertyDeleted: "Propriété supprimée avec succès!",
    addTenant: "Ajouter un locataire",
    editTenant: "Modifier le locataire",
    deleteTenant: "Supprimer le locataire",
    tenantName: "Nom du locataire",
    tenantEmail: "Email du locataire",
    tenantPhone: "Téléphone du locataire",
    tenantDetails: "Détails du locataire",
    tenantAdded: "Locataire ajouté avec succès!",
    tenantUpdated: "Locataire mis à jour avec succès!",
    tenantDeleted: "Locataire supprimé avec succès!",
    noProperties: "Aucune propriété disponible.",
    noTenants: "Aucun locataire disponible.",
    maintenanceRequests: "Demandes de maintenance",
    noMaintenanceRequests: "Aucune demande de maintenance.",
    addMaintenanceRequest: "Ajouter une demande de maintenance",
    editMaintenanceRequest: "Modifier la demande de maintenance",
    deleteMaintenanceRequest: "Supprimer la demande de maintenance",
    maintenanceRequestDetails: "Détails de la demande de maintenance",
    maintenanceRequestAdded: "Demande de maintenance ajoutée avec succès!",
    maintenanceRequestUpdated: "Demande de maintenance mise à jour avec succès!",
    maintenanceRequestDeleted: "Demande de maintenance supprimée avec succès!",
    issue: "Problème",
    description: "Description",
    priority: "Priorité",
    status: "Statut",
    selectPriority: "Sélectionner la priorité",
    selectStatus: "Sélectionner le statut",
    pending: "En attente",
    inProgress: "En cours",
    resolved: "Résolue",
    high: "Haute",
    medium: "Moyenne",
    low: "Basse",
    urgent: "Urgente",
    financialRecords: "Dossiers financiers",
    addFinancialRecord: "Ajouter un dossier financier",
    editFinancialRecord: "Modifier le dossier financier",
    deleteFinancialRecord: "Supprimer le dossier financier",
    financialRecordDetails: "Détails du dossier financier",
    financialRecordAdded: "Dossier financier ajouté avec succès!",
    financialRecordUpdated: "Dossier financier mis à jour avec succès!",
    financialRecordDeleted: "Dossier financier supprimé avec succès!",
    date: "Date",
    amount: "Montant",
    type: "Type",
    selectType: "Sélectionner le type",
    income: "Revenu",
    expense: "Dépense",
    category: "Catégorie",
    selectCategory: "Sélectionner la catégorie",
    notes: "Remarques",
    noFinancialRecords: "Aucun dossier financier disponible.",
    leaseStartDate: "Date de début du bail",
    leaseEndDate: "Date de fin du bail",
    monthlyRent: "Loyer mensuel",
    deposit: "Dépôt",
    unit: "Unité",
    utilitiesIncluded: "Services inclus",
    petsAllowed: "Animaux autorisés",
    tenantAgreement: "Contrat de location",
    tenantPortalAccess: "Accès au portail locataire",
    tenantAddedSuccess: "Locataire ajouté avec succès.",
    tenantUpdatedSuccess: "Locataire mis à jour avec succès.",
    tenantDeletedSuccess: "Locataire supprimé avec succès.",
    propertyAddedSuccess: "Propriété ajoutée avec succès.",
    propertyUpdatedSuccess: "Propriété mise à jour avec succès.",
    propertyDeletedSuccess: "Propriété supprimée avec succès.",
    maintenanceRequestAddedSuccess: "Demande de maintenance ajoutée avec succès.",
    maintenanceRequestUpdatedSuccess: "Demande de maintenance mise à jour avec succès.",
    maintenanceRequestDeletedSuccess: "Demande de maintenance supprimée avec succès.",
    financialRecordAddedSuccess: "Dossier financier ajouté avec succès.",
    financialRecordUpdatedSuccess: "Dossier financier mis à jour avec succès.",
    financialRecordDeletedSuccess: "Dossier financier supprimé avec succès.",
    error: "Erreur",
    success: "Succès",
    confirm: "Confirmer",
    viewAll: "Voir tout",
    view: "Voir",
    edit: "Modifier",
    delete: "Supprimer",
    details: "Détails",
    photos: "Photos",
    history: "Historique",
    feedback: "Commentaires",
    messages: "Messages",
    close: "Fermer",
    created: "Créé",
    updated: "Mis à jour",
    noDescriptionProvided: "Aucune description fournie.",
    addTask: "Ajouter une tâche",
    taskAdded: "Tâche ajoutée avec succès!",
    errorAddingTask: "Erreur lors de l'ajout de la tâche.",
    task: "Tâche",
    tasks: "Tâches",
    noTasks: "Aucune tâche trouvée",
    title: "Titre",
    assignee: "Assigné à",
    dueDate: "Date d'échéance",
    markAsComplete: "Marquer comme terminé",
    completed: "Terminé",
    incomplete: "Incomplet",
    all: "Tous",
    vendors: "Fournisseurs",
    addVendor: "Ajouter un fournisseur",
    vendorName: "Nom du fournisseur",
    vendorContact: "Contact du fournisseur",
    vendorPhone: "Téléphone du fournisseur",
    vendorEmail: "Email du fournisseur",
    vendorAddress: "Adresse du fournisseur",
    vendorServices: "Services offerts",
    saveVendor: "Enregistrer le fournisseur",
    vendorAdded: "Fournisseur ajouté avec succès!",
    vendorUpdated: "Fournisseur mis à jour avec succès!",
    vendorDeleted: "Fournisseur supprimé avec succès!",
    editVendor: "Modifier le fournisseur",
    deleteVendor: "Supprimer le fournisseur",
    noVendors: "Aucun fournisseur disponible.",
    addExpense: "Ajouter une dépense",
    expenseAdded: "Dépense ajoutée avec succès!",
    errorAddingExpense: "Erreur lors de l'ajout de la dépense.",
    amountPaid: "Montant payé",
    paymentDate: "Date de paiement",
    paymentMethod: "Méthode de paiement",
    selectPaymentMethod: "Sélectionner la méthode de paiement",
    cash: "Espèces",
    creditCard: "Carte de crédit",
    bankTransfer: "Virement bancaire",
    check: "Chèque",
    other: "Autre",
    invoiceNumber: "Numéro de facture",
    uploadInvoice: "Télécharger la facture",
    noTenantAssociated: "Aucun locataire associé.",
    errorLoadingMessages: "Erreur lors du chargement des messages.",
    notificationSent: "Notification envoyée",
    tenantNotified: "Locataire notifié",
    notificationFailed: "Échec de la notification",
    failedToSendNotification: "Échec de l'envoi de la notification",
    notifyTenantAboutUpdate: "Notifier le locataire de la mise à jour",
    updateRequest: "Mettre à jour la demande",
    noPhotosAvailable: "Aucune photo disponible",
    totalRequests: "Demandes Totales",
    pendingRequests: "Demandes En Attente",
    resolvedRequests: "Demandes Résolues",
    maintenanceRequestsTrends: "Tendances des Demandes de Maintenance",
    totalMaintenanceRequests: "Nombre Total de Demandes",
    completedMaintenanceRequests: "Demandes Terminées",
    urgentMaintenanceRequests: "Demandes Urgentes",
    maintenanceExpensesTrends: "Tendances des Dépenses de Maintenance",
    maintenanceExpenses: "Dépenses de Maintenance",
  },
  en: {
    // Hero translations
    heroTitle: "Property Management Made Simple",
    heroSubtitle: "The complete solution for Canadian property owners. Manage tenants, maintenance, and finances all in one place.",
    heroGetStarted: "Get Started Free",
    learnMore: "Learn More",
    
    // Features translations
    everythingYouNeed: "Everything You Need",
    featuresSubtitle: "Powerful tools to simplify your property management",
    propertyManagement: "Property Management",
    propertyManagementDesc: "Organize and track all your properties in one place",
    tenantManagement: "Tenant Management",
    tenantManagementDesc: "Manage tenant information, leases, and communication",
    maintenanceManagement: "Maintenance",
    maintenanceDesc: "Track maintenance requests and coordinate repairs",
    security: "Security",
    securityDesc: "Your data is protected with bank-level encryption",
    
    // How It Works translations
    howItWorksTitle: "How It Works",
    howItWorksSubtitle: "Simple steps to start managing your properties",
    step1Title: "Create an Account",
    step1Description: "Sign up in minutes with your email address",
    step2Title: "Add Your Properties",
    step2Description: "Enter your property details and start managing",
    step3Title: "Manage Tenants",
    step3Description: "Add tenants and handle communications efficiently",
    step4Title: "Track Everything",
    step4Description: "Monitor maintenance, payments, and documents in one place",
    
    // Pricing translations
    pricingTitle: "Simple, Transparent Pricing",
    pricingSubtitle: "Choose the plan that works best for you",
    pricingStartFree: "Get Started",
    pricingGetStarted: "Get Started",
    comparePlans: "Compare Plans",
    comparePlansTitle: "Plan Feature Comparison",
    feature: "Feature",
    freemiumPlan: "Basic",
    proPlan: "Standard",
    enterprisePlan: "Pro",
    free: "Free",
    month: "month",
    mostPopular: "Most Popular",
    
    // Plan Features
    upTo2Properties: "Up to 3 properties",
    upTo5Properties: "Up to 10 properties",
    upTo20Properties: "Unlimited properties",
    rentManagement: "Basic rent tracking",
    digitalDocuments: "Document storage",
    basicPropertyCards: "Basic tenant management",
    emailNotifications: "Email notifications",
    tenantVerification: "Tenant verification",
    prioritySupport: "Priority support",
    advancedDashboard: "Advanced dashboard",
    financialReports: "Basic financial reports",
    maintenanceManagementFeature: "Maintenance management",
    dedicatedSupport: "Dedicated support team",
    customDashboard: "Custom dashboard",
    advancedFinancialReports: "Advanced financial reports",
    userTraining: "User training sessions",
    dailyBackup: "Automatic data backup",
    
    // Additional tenant dashboard translations
    overview: "Overview",
    leaseStatus: "Lease Status",
    leaseStart: "Lease Start",
    leaseEnd: "Lease End",
    daysRemaining: "Days Remaining",
    allGood: "All Good",
    noMaintenanceIssues: "No maintenance issues",
    unread: "Unread",
    upToDate: "Up to Date",
    unreadMessages: "Unread messages",
    noNewMessages: "No new messages",
    recentActivity: "Recent Activity",
    noRecentActivity: "No recent activity",
    unit: "Unit",
    unitLabel: "Unit",
    leaseActive: "Lease Active",
    leaseExpiring: "Lease Expiring",
    leaseExpired: "Lease Expired",
    
    // FAQ translations
    frequentlyAskedQuestions: "Frequently Asked Questions",
    findAnswers: "Find answers to common questions",
    faqHowToStart: "How do I get started?",
    faqHowToStartAnswer: "Simply create an account and follow our step-by-step guide to add your first property.",
    faqFeatures: "What features are included?",
    faqFeaturesAnswer: "Our platform includes property management, tenant management, maintenance tracking, and financial reporting.",
    faqMultipleProperties: "Can I manage multiple properties?",
    faqMultiplePropertiesAnswer: "Yes, you can manage multiple properties from a single dashboard.",
    faqCommunication: "How does tenant communication work?",
    faqCommunicationAnswer: "You can communicate with tenants through our built-in messaging system and notifications.",
    faqSecurity: "Is my data secure?",
    faqSecurityAnswer: "Yes, we use industry-standard encryption and security measures to protect your data.",
    faqExport: "Can I export my data?",
    faqExportAnswer: "Yes, you can export your data in various formats including PDF and Excel.",
    
    // Contact translations
    contactUs: "Contact Us",
    contactSubtitle: "We're here to help",
    phone: "Phone",
    email: "Email",
    office: "Office",
    sendMessage: "Send us a Message",
    yourName: "Your Name",
    yourEmail: "Your Email",
    message: "Message",
    sending: "Sending...",
    send: "Send Message",
    contactName: "Name",
    contactEmail: "Email",
    contactMessage: "Message",
    contactSend: "Send",
    contactThankYou: "Thank you for your message!",
    
    // Footer translations
    companyName: "PropManagement",
    companyDescription: "The complete solution for property management in Canada.",
    product: "Product",
    features: "Features",
    pricing: "Pricing",
    company: "Company",
    aboutUs: "About Us",
    careers: "Careers",
    contact: "Contact",
    legal: "Legal",
    privacyPolicy: "Privacy Policy",
    termsOfService: "Terms of Service",
    cookiePolicy: "Cookie Policy",
    allRightsReserved: "All rights reserved.",
    
    // CTA translations
    readyToStart: "Ready to Simplify Your Management?",
    joinOthers: "Join thousands of property owners who trust our solution",
    ctaStartFree: "Try For Free",
    
    // Existing translations
    welcome: "Welcome",
    login: "Login",
    logout: "Logout",
    dashboard: "Dashboard",
    properties: "Properties",
    tenants: "Tenants",
    maintenance: "Maintenance",
    financials: "Financials",
    settings: "Settings",
    addProperty: "Add Property",
    editProperty: "Edit Property",
    deleteProperty: "Delete Property",
    propertyName: "Property Name",
    propertyAddress: "Property Address",
    propertyType: "Property Type",
    propertyDetails: "Property Details",
    save: "Save",
    cancel: "Cancel",
    deleteConfirmation: "Are you sure you want to delete this property?",
    propertyAdded: "Property added successfully!",
    propertyUpdated: "Property updated successfully!",
    propertyDeleted: "Property deleted successfully!",
    addTenant: "Add Tenant",
    editTenant: "Edit Tenant",
    deleteTenant: "Delete Tenant",
    tenantName: "Tenant Name",
    tenantEmail: "Tenant Email",
    tenantPhone: "Tenant Phone",
    tenantDetails: "Tenant Details",
    tenantAdded: "Tenant added successfully!",
    tenantUpdated: "Tenant updated successfully!",
    tenantDeleted: "Tenant deleted successfully!",
    noProperties: "No properties available.",
    noTenants: "No tenants available.",
    maintenanceRequests: "Maintenance Requests",
    noMaintenanceRequests: "No maintenance requests.",
    addMaintenanceRequest: "Add Maintenance Request",
    editMaintenanceRequest: "Edit Maintenance Request",
    deleteMaintenanceRequest: "Delete Maintenance Request",
    maintenanceRequestDetails: "Maintenance Request Details",
    maintenanceRequestAdded: "Maintenance request added successfully!",
    maintenanceRequestUpdated: "Maintenance request updated successfully!",
    maintenanceRequestDeleted: "Maintenance request deleted successfully!",
    issue: "Issue",
    description: "Description",
    priority: "Priority",
    status: "Status",
    selectPriority: "Select Priority",
    selectStatus: "Select Status",
    pending: "Pending",
    inProgress: "In Progress",
    resolved: "Resolved",
    high: "High",
    medium: "Medium",
    low: "Low",
    urgent: "Urgent",
    financialRecords: "Financial Records",
    addFinancialRecord: "Add Financial Record",
    editFinancialRecord: "Edit Financial Record",
    deleteFinancialRecord: "Delete Financial Record",
    financialRecordDetails: "Financial Record Details",
    financialRecordAdded: "Financial record added successfully!",
    financialRecordUpdated: "Financial record updated successfully!",
    financialRecordDeleted: "Financial record deleted successfully!",
    date: "Date",
    amount: "Amount",
    type: "Type",
    selectType: "Select Type",
    income: "Income",
    expense: "Expense",
    category: "Category",
    selectCategory: "Select Category",
    notes: "Notes",
    noFinancialRecords: "No financial records available.",
    leaseStartDate: "Lease Start Date",
    leaseEndDate: "Lease End Date",
    monthlyRent: "Monthly Rent",
    deposit: "Deposit",
    unit: "Unit",
    utilitiesIncluded: "Utilities Included",
    petsAllowed: "Pets Allowed",
    tenantAgreement: "Tenant Agreement",
    tenantPortalAccess: "Tenant Portal Access",
    tenantAddedSuccess: "Tenant added successfully.",
    tenantUpdatedSuccess: "Tenant updated successfully.",
    tenantDeletedSuccess: "Tenant deleted successfully.",
    propertyAddedSuccess: "Property added successfully.",
    propertyUpdatedSuccess: "Property updated successfully.",
    propertyDeletedSuccess: "Property deleted successfully.",
    maintenanceRequestAddedSuccess: "Maintenance request added successfully.",
    maintenanceRequestUpdatedSuccess: "Maintenance request updated successfully.",
    maintenanceRequestDeletedSuccess: "Maintenance request deleted successfully.",
    financialRecordAddedSuccess: "Financial record added successfully.",
    financialRecordUpdatedSuccess: "Financial record updated successfully.",
    financialRecordDeletedSuccess: "Financial record deleted successfully.",
    error: "Error",
    success: "Success",
    confirm: "Confirm",
    viewAll: "View All",
    view: "View",
    edit: "Edit",
    delete: "Delete",
    details: "Details",
    photos: "Photos",
    history: "History",
    feedback: "Feedback",
    messages: "Messages",
    close: "Close",
    created: "Created",
    updated: "Updated",
    noDescriptionProvided: "No description provided.",
    addTask: "Add Task",
    taskAdded: "Task added successfully!",
    errorAddingTask: "Error adding task.",
    task: "Task",
    tasks: "Tasks",
    noTasks: "No tasks found",
    title: "Title",
    assignee: "Assignee",
    dueDate: "Due Date",
    markAsComplete: "Mark as Complete",
    completed: "Completed",
    incomplete: "Incomplete",
    all: "All",
    vendors: "Vendors",
    addVendor: "Add Vendor",
    vendorName: "Vendor Name",
    vendorContact: "Vendor Contact",
    vendorPhone: "Vendor Phone",
    vendorEmail: "Vendor Email",
    vendorAddress: "Vendor Address",
    vendorServices: "Vendor Services",
    saveVendor: "Save Vendor",
    vendorAdded: "Vendor added successfully!",
    vendorUpdated: "Vendor updated successfully!",
    vendorDeleted: "Vendor deleted successfully!",
    editVendor: "Edit Vendor",
    deleteVendor: "Delete Vendor",
    noVendors: "No vendors available.",
    addExpense: "Add Expense",
    expenseAdded: "Expense added successfully!",
    errorAddingExpense: "Error adding expense.",
    amountPaid: "Amount Paid",
    paymentDate: "Payment Date",
    paymentMethod: "Payment Method",
    selectPaymentMethod: "Select Payment Method",
    cash: "Cash",
    creditCard: "Credit Card",
    bankTransfer: "Bank Transfer",
    check: "Check",
    other: "Other",
    invoiceNumber: "Invoice Number",
    uploadInvoice: "Upload Invoice",
    noTenantAssociated: "No tenant associated.",
    errorLoadingMessages: "Error loading messages.",
    notificationSent: "Notification sent",
    tenantNotified: "Tenant notified",
    notificationFailed: "Notification failed",
    failedToSendNotification: "Failed to send notification",
    notifyTenantAboutUpdate: "Notify tenant about update",
    updateRequest: "Update request",
    noPhotosAvailable: "No photos available",
    totalRequests: "Total Requests",
    pendingRequests: "Pending Requests",
    resolvedRequests: "Resolved Requests",
    maintenanceRequestsTrends: "Maintenance Requests Trends",
    totalMaintenanceRequests: "Total Maintenance Requests",
    completedMaintenanceRequests: "Completed Maintenance Requests",
    urgentMaintenanceRequests: "Urgent Maintenance Requests",
    maintenanceExpensesTrends: "Maintenance Expenses Trends",
    maintenanceExpenses: "Maintenance Expenses",
  }
};

export const LocaleProvider: React.FC<LocaleProviderProps> = ({ children, defaultLocale = 'fr' }) => {
  const [locale, setLocale] = useState<string>(defaultLocale);
  const [language, setLanguage] = useState<string>(defaultLocale);
  const [unitSystem, setUnitSystem] = useState<'metric' | 'imperial'>('metric');

  useEffect(() => {
    const storedLocale = localStorage.getItem('locale') || defaultLocale;
    const storedUnitSystem = localStorage.getItem('unitSystem') as 'metric' | 'imperial' || 'metric';
    setLocale(storedLocale);
    setLanguage(storedLocale);
    setUnitSystem(storedUnitSystem);
  }, [defaultLocale]);

  useEffect(() => {
    localStorage.setItem('locale', locale);
    localStorage.setItem('unitSystem', unitSystem);
    setLanguage(locale);
  }, [locale, unitSystem]);

  const t = useCallback((key: string, args?: any): string => {
    let translation = translations[locale as keyof typeof translations]?.[key] || key;

    if (args) {
      Object.keys(args).forEach(argKey => {
        const regex = new RegExp(`\\{${argKey}\\}`, 'g');
        translation = translation.replace(regex, args[argKey]);
      });
    }

    return translation;
  }, [locale]);

  const contextValue: LocaleContextProps = {
    locale,
    setLocale,
    t,
    language,
    setLanguage: setLocale,
    unitSystem,
    setUnitSystem,
  };

  return (
    <LocaleContext.Provider value={contextValue}>
      {children}
    </LocaleContext.Provider>
  );
};

export const useLocale = (): LocaleContextProps => {
  const context = useContext(LocaleContext);
  if (!context) {
    throw new Error("useLocale must be used within a LocaleProvider");
  }
  return context;
};
